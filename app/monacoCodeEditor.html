<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>Monaco Editor!</title>
	<link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.css">
	<link rel="stylesheet" href="../node_modules/@fortawesome/fontawesome-free/css/all.css">
	<script src="./js/doorsapi/doorsapi.embed.js" type="text/javascript"></script>
	<style>
		.monaco-editor{
			width: 100%;
			height: 100%;
		}
		.monaco-container{
			
			height: 95vh;
			border:1px solid #ccc
		}
		.d-none{
			display: none;
		}
		</style>
</head>

<body>
	<div id="loading-spinner" style="text-align:center;margin:50px">
		<div class="spinner-border text-success" role="status"> 
			<span class="sr-only">Loading...</span> 
		</div>
	</div>
	<div id="container" class="monaco-container d-none" >


	</div>
</body>

<script>
	window.Bootstrap = require('../node_modules/bootstrap/dist/js/bootstrap.js');
	
	require('./js/monacoCodeEditor.js');

	function loadEditor() {
		{
			const path = require('path');
			const amdLoader = require('../node_modules/monaco-editor/min/vs/loader.js');
			const amdRequire = amdLoader.require;
			const amdDefine = amdLoader.require.define;

			function uriFromPath(_path) {
				var pathName = path.resolve(_path).replace(/\\/g, '/');
				if (pathName.length > 0 && pathName.charAt(0) !== '/') {
					pathName = '/' + pathName;
				}
				return encodeURI('file://' + pathName);
			}

			amdRequire.config({
				baseUrl: uriFromPath(path.join(__dirname, '../node_modules/monaco-editor/min'))
			});

			// workaround monaco-css not understanding the environment
			self.module = undefined;

			amdRequire(['vs/editor/editor.main'], function () {
				var editor = monaco.editor.create(document.getElementById('container'), {
					value: [
						'function x() {',
						'\tconsole.log("Hello world!");',
						'}'
					].join('\n'),
					language: 'javascript'
				});
			});
		}
	}
</script>

</html>